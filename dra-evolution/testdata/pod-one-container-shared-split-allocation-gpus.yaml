# A Pod asking for 1-8 whole OR partial Foozer GPUs such that the total
# available memory is at least 128Gi. They must be on the same PCI root.

apiVersion: resource.k8s.io/v1alpha2
kind: ResourceClaimTemplate
metadata:
  name: foozer-split-shared-128Gi
  namespace: default
spec:
  spec:
    requests:
    - classes:
      - name: example.com-foozer
      - name: same-pci-root
      count:
        maximum: 8
      requirements:
      - resource:
          name: memory
          quantity: 128Gi
---
apiVersion: v1
kind: Pod
metadata:
  name: foozer
  namespace: default
spec:
  containers:
  - image: registry.k8s.io/pause:3.6
    name: my-container
    resources:
      requests:
        cpu: 10m
        memory: 10Mi
      claims:
      - name: gpu
  resourceClaims:
  - name: gpu
    source:
      resourceClaimTemplateName: foozer-split-shared-128Gi
